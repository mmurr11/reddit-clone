"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[516],{42:function(n,t,r){r.d(t,{U:function(){return p}});var e=r(5893),o=r(2175),u=r(4612),i=r(3441),a=r(9762);function c(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function s(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function f(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},e=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})))),e.forEach((function(t){s(n,t,r[t])}))}return n}function l(n,t){if(null==n)return{};var r,e,o=function(n,t){if(null==n)return{};var r,e,o={},u=Object.keys(n);for(e=0;e<u.length;e++)r=u[e],t.indexOf(r)>=0||(o[r]=n[r]);return o}(n,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(e=0;e<u.length;e++)r=u[e],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function d(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,o,u=[],i=!0,a=!1;try{for(r=r.call(n);!(i=(e=r.next()).done)&&(u.push(e.value),!t||u.length!==t);i=!0);}catch(c){a=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return u}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return c(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=function(n){var t,r=n.label,c=n.textarea,s=(n.size,l(n,["label","textarea","size"]));t=u.II,c&&(t=i.g);var p=d((0,o.U$)(s),2),v=p[0],m=p[1].error;return(0,e.jsxs)(a.NI,{isInvalid:!!m,children:[(0,e.jsx)(a.lX,{htmlFor:v.name,children:r}),(0,e.jsx)(t,f({},v,s,{id:v.name,placeholder:s.placeholder})),m?(0,e.jsx)(a.J1,{children:m}):null]})}},9113:function(n,t,r){r.d(t,{i:function(){return u}});var e=r(5893),o=r(8527),u=function(n){var t=n.children,r=n.variant,u=void 0===r?"medium":r;return(0,e.jsx)(o.xu,{mt:8,mx:"auto",maxW:"medium"===u?"800px":"400px",w:"100%",children:t})}},9402:function(n,t,r){r.d(t,{$h:function(){return Z},u3:function(){return U},jn:function(){return R},zN:function(){return D},YA:function(){return M},_y:function(){return z},l4:function(){return C},Bq:function(){return K},ot:function(){return G},en:function(){return L},UE:function(){return T},Ss:function(){return J},Bm:function(){return W}});var e=r(210),o=r(2432);function u(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function i(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},e=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})))),e.forEach((function(t){u(n,t,r[t])}))}return n}function a(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function c(){var n=a(["\n  fragment PostSnippet on Post {\n    id\n    createdAt\n    updatedAt\n    title\n    textSnippet\n    points\n    voteStatus\n    creator {\n      username\n      id\n    }\n  }\n"]);return c=function(){return n},n}function s(){var n=a(["\n  fragment RegularError on FieldError {\n    field\n    message\n  }\n"]);return s=function(){return n},n}function f(){var n=a(["\n  fragment RegularUser on User {\n    id\n    username\n  }\n"]);return f=function(){return n},n}function l(){var n=a(["\n  fragment RegularUserResponse on UserResponse {\n    errors {\n      ...RegularError\n    }\n    user {\n      ...RegularUser\n    }\n  }\n  ","\n  ","\n"]);return l=function(){return n},n}function d(){var n=a(["\n  mutation ChangePassword($token: String!, $newPassword: String!) {\n    changePassword(token: $token, newPassword: $newPassword) {\n      ...RegularUserResponse\n    }\n  }\n  ","\n"]);return d=function(){return n},n}function p(){var n=a(["\n  mutation CreatePost($input: PostInput!) {\n    createPost(input: $input) {\n      id\n      createdAt\n      updatedAt\n      title\n      text\n      points\n      creatorId\n    }\n  }\n"]);return p=function(){return n},n}function v(){var n=a(["\n  mutation DeletePost($id: Int!) {\n    deletePost(id: $id)\n  }\n"]);return v=function(){return n},n}function m(){var n=a(["\n  mutation ForgotPassword($email: String!) {\n    forgotPassword(email: $email)\n  }\n"]);return m=function(){return n},n}function g(){var n=a(["\n  mutation Login($usernameOrEmail: String!, $password: String!) {\n    login(usernameOrEmail: $usernameOrEmail, password: $password) {\n      ...RegularUserResponse\n    }\n  }\n  ","\n"]);return g=function(){return n},n}function y(){var n=a(["\n  mutation Logout {\n    logout\n  }\n"]);return y=function(){return n},n}function b(){var n=a(["\n  mutation Register($options: UsernamePasswordInput!) {\n    register(options: $options) {\n      ...RegularUserResponse\n    }\n  }\n  ","\n"]);return b=function(){return n},n}function P(){var n=a(["\n  mutation UpdatePost($id: Int!, $title: String!, $text: String!) {\n    updatePost(id: $id, title: $title, text: $text) {\n      id\n      title\n      text\n      textSnippet\n    }\n  }\n"]);return P=function(){return n},n}function h(){var n=a(["\n  mutation Vote($value: Int!, $postId: Int!) {\n    vote(value: $value, postId: $postId)\n  }\n"]);return h=function(){return n},n}function w(){var n=a(["\n  query Me {\n    me {\n      id\n      username\n    }\n  }\n"]);return w=function(){return n},n}function O(){var n=a(["\n  query Post($id: Int!) {\n    post(id: $id) {\n      id\n      createdAt\n      updatedAt\n      title\n      points\n      text\n      voteStatus\n      creator {\n        id\n        username\n      }\n    }\n  }\n"]);return O=function(){return n},n}function S(){var n=a(["\n  query Posts($limit: Int!, $cursor: String) {\n    posts(cursor: $cursor, limit: $limit) {\n      hasMore\n      posts {\n        ...PostSnippet\n      }\n    }\n  }\n  ","\n"]);return S=function(){return n},n}var $=(0,e.ZP)(c()),j=(0,e.ZP)(s()),x=(0,e.ZP)(f()),I=(0,e.ZP)(l(),j,x),A=(0,e.ZP)(d(),I);function Z(){return o.Db(A)}var E=(0,e.ZP)(p());function U(){return o.Db(E)}var k=(0,e.ZP)(v());function R(){return o.Db(k)}var q=(0,e.ZP)(m());function D(){return o.Db(q)}var _=(0,e.ZP)(g(),I);function M(){return o.Db(_)}var F=(0,e.ZP)(y());function z(){return o.Db(F)}var N=(0,e.ZP)(b(),I);function C(){return o.Db(N)}var B=(0,e.ZP)(P());function K(){return o.Db(B)}var Q=(0,e.ZP)(h());function G(){return o.Db(Q)}var L=(0,e.ZP)(w());function T(n){return o.aM(i({query:L},n))}var H=(0,e.ZP)(O());function J(n){return o.aM(i({query:H},n))}var V=(0,e.ZP)(S(),$);function W(n){return o.aM(i({query:V},n))}},4034:function(n,t,r){r.d(t,{MS:function(){return P}});var e=r(1848),o=r(6997),u=r(9402);function i(n,t,r,e){return n.updateQuery(t,(function(n){return e(r,n)}))}var a=r(2559),c=r(3496),s=r(1163),f=r(7786),l=r(210);function d(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function p(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function v(n){return function(n){if(Array.isArray(n))return d(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"===typeof n)return d(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(){var n=p(["\n                  fragment _ on Post {\n                    id\n                    points\n                    voteStatus\n                  }\n                "]);return m=function(){return n},n}function g(){var n=p(["\n\n                  fragment __ on Post {\n                    points\n                    voteStatus\n                  }\n                  "]);return g=function(){return n},n}var y=function(n){var t=n.forward;return function(n){return(0,c.zG)(t(n),(0,c.bw)((function(n){var t=n.error;(null===t||void 0===t?void 0:t.message.includes("not authenticated"))&&s.default.replace("/login")})))}},b=function(n){n.inspectFields("Query").filter((function(n){return"posts"===n.fieldName})).forEach((function(t){n.invalidate("Query","posts",t.arguments||{})}))},P=function(n,t){var r,c,s="";(0,f.s)()&&(s=null===t||void 0===t||null===(r=t.req)||void 0===r||null===(c=r.headers)||void 0===c?void 0:c.cookie);return console.log("api url is: ","http://localhost:4000/graphql"),{url:"http://localhost:4000/graphql",fetchOptions:{credentials:"include",headers:s?{cookie:s}:void 0},exchanges:[o.B5,(0,a.HG)({keys:{PaginatedPosts:function(){return null}},resolvers:{Query:{posts:function(n,t,r,o){var u=o.parentKey,i=o.fieldName,a=r.inspectFields(u).filter((function(n){return n.fieldName===i}));if(0!==a.length){var c="".concat(i,"(").concat((0,e.h)(t),")"),s=r.resolve(r.resolveFieldByKey(u,c),"posts");o.partial=!s;var f=!0,l=[];return a.forEach((function(n){var t,e=r.resolveFieldByKey(u,n.fieldKey),o=r.resolve(e,"posts"),i=r.resolve(e,"hasMore");i||(f=i),(t=l).push.apply(t,v(o))})),{__typename:"PaginatedPosts",hasMore:f,posts:l}}}}},updates:{Mutation:{deletePost:function(n,t,r,e){r.invalidate({__typename:"Post",id:t.id})},vote:function(n,t,r,e){var o=t.postId,u=t.value,i=r.readFragment((0,l.ZP)(m()),{id:o});if(console.log("data",i),i){if(i.voteStatus===u)return;var a=i.points+(i.voteStatus?2:1)*u;r.writeFragment((0,l.ZP)(g()),{id:o,points:a,voteStatus:u})}},createPost:function(n,t,r,e){b(r)},logout:function(n,t,r,e){i(r,{query:u.en},n,(function(){return{me:null}}))},login:function(n,t,r,e){i(r,{query:u.en},n,(function(n,t){return n.login.errors?t:{me:n.login.user}})),b(r)},register:function(n,t,r,e){i(r,{query:u.en},n,(function(n,t){return n.register.errors?t:{me:n.register.user}}))}}}}),y,n,o.Ek]}}},7786:function(n,t,r){r.d(t,{s:function(){return e}});var e=function(){return!1}}}]);